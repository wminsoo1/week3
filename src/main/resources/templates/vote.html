<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Idea Voting</title>
</head>
<body>

<h2>Idea Voting</h2>

<!-- 투표 폼 -->
<form th:action="@{/vote}" method="post">
  <h3>Select an Idea to Vote</h3>

  <!-- Idea 목록을 반복해서 표시 -->
  <ul>
    <li th:each="idea : ${ideas}">
      <!-- 아이디어 제목 -->
      <input type="radio" th:id="${'idea-' + idea.ideaId}" th:name="ideaId" th:value="${idea.ideaId}"
             th:checked="${user != null and idea.ideaId == user.votedIdea?.ideaId}"
             th:disabled="${hasVoted}">
      <label th:for="${'idea-' + idea.ideaId}" th:text="${idea.ideaTitle}">Idea Title</label>

      <!-- 아이디어 설명 -->
      <p th:text="${idea.ideaDescription}">Idea Description</p>

      <!-- 창작자 ID (creator가 null이 아닐 때만 표시) -->
      <p th:if="${idea.creator != null}" th:text="'Creator ID: ' + ${idea.creator.id}">Creator ID</p>
    </li>
  </ul>

  <!-- 투표 버튼 (이미 투표한 경우 비활성화) -->
  <button type="submit" th:name="action" th:value="vote" th:disabled="${hasVoted}">Vote</button>

  <!-- 투표 취소 버튼 (투표한 경우에만 표시) -->
  <button type="submit" th:name="action" th:value="cancel" th:if="${user != null and user.votedIdea != null}">Cancel Vote</button>
</form>

</body>
</html>
