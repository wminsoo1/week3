<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="UTF-8">
  <title>Idea Voting</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>

<body class="bg-light">

<div class="container mt-5">
  <h2>Idea Voting</h2>

  <!-- Voting Form -->
  <form th:action="@{/vote}" method="post">
    <h3>Select an Idea to Vote</h3>

    <!-- Idea List -->
    <ul class="list-group">
      <li th:each="idea : ${ideas}" class="list-group-item">
        <!-- Idea Title -->
        <div class="form-check">
          <input type="radio" th:id="${'idea-' + idea.ideaId}" th:name="ideaId"
                 th:value="${idea.ideaId}" th:checked="${user != null and idea.ideaId == user.votedIdea?.ideaId}"
                 th:disabled="${hasVoted}" class="form-check-input">
          <label th:for="${'idea-' + idea.ideaId}" th:text="${idea.ideaTitle}" class="form-check-label"></label>

          <!-- Idea Description -->
          <p th:text="${idea.ideaDescription}" class="mb-1"></p>

          <!-- Creator ID (displayed only when creator is not null) -->
          <p th:if="${idea.creator != null}" th:text="'Creator ID: ' + ${idea.creator.id}" class="mb-1"></p>
        </div>
      </li>
    </ul>

    <!-- Vote Button (disabled if already voted) -->
    <button type="submit" th:name="action" th:value="vote" th:disabled="${hasVoted}" class="btn btn-primary">Vote</button>

    <!-- Cancel Vote Button (displayed only if voted) -->
    <button type="submit" th:name="action" th:value="cancel" th:if="${user != null and user.votedIdea != null}"
            class="btn btn-secondary">Cancel Vote</button>
  </form>

</div>

</body>

</html>
